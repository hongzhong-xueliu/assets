<!DOCTYPE html>

<head>
    <link rel="stylesheet" href="3d.css">
    <link rel="stylesheet" href="river.css">
</head>

<body style="background-color: #3f7528;">
    <template id="piece-template">
        <div class="three-d piece-obj">
            <div class="face face1"><img src="./assets/5筒.png" height="80"></div>
            <div class="face face2"></div>
            <div class="face side-faceA"></div>
            <div class="face side-faceB"></div>
            <div class="face side-faceC"></div>
            <div class="face side-faceD"></div>
        </div>
    </template>

    <div style="perspective: 2400px; position: relative;">
        <div id="river" class="three-d" style="transform: rotate3d(1, 0, 0, 50deg)">
            <div id="自家-河" class="three-d" style="transform: translate(var(--自家-left), var(--自家-top));">
            </div>
            <div id="下家-河" class="three-d"
                style="transform: translate(var(--下家-left), var(--下家-bottom)) rotateZ(-90deg);">
            </div>
            <div id="対面-河" class="three-d"
                style="transform: translate(var(--対面-right), var(--対面-bottom)) rotateZ(-180deg);">
            </div>
            <div id="上家-河" class="three-d"
                style="transform: translate(var(--上家-right), var(--上家-top)) rotateZ(-270deg);">
            </div>
        </div>
    </div>

    <script>
        const pieceTemplate = document.getElementById('piece-template');
        const river = document.getElementById('river');

        const 自家河 = document.getElementById('自家-河');
        const 下家河 = document.getElementById('下家-河');
        const 対面河 = document.getElementById('対面-河');
        const 上家河 = document.getElementById('上家-河');

        const pieces = [
            [自家河, 0, 0, "5筒"],
            [自家河, 1, 0, "8索"],
            [自家河, 2, 0, "7索"],
            [自家河, 3, 0, "3索"],
            [自家河, 4, 0, "1索"],
            [自家河, 5, 0, "6筒"],

            [下家河, 0, 0, "8萬"],
            [下家河, 1, 0, "8筒"],
            [下家河, 2, 0, "4萬"],
            [下家河, 3, 0, "4筒"],
            [下家河, 4, 0, "1萬"],
            [下家河, 5, 0, "1筒"],

            [対面河, 0, 0, "9筒"],
            [対面河, 1, 0, "4筒"],
            [対面河, 2, 0, "8筒"],
            [対面河, 3, 0, "6索"],
            [対面河, 4, 0, "3索"],
            [対面河, 5, 0, "1筒"],

            [上家河, 0, 0, "6索"],
            [上家河, 1, 0, "4筒"],
            [上家河, 2, 0, "5筒"],
            [上家河, 3, 0, "7筒"],
            [上家河, 4, 0, "3萬"],
            [上家河, 5, 0, "6萬"],
        ];

        pieces.forEach(([river, x, y, identity]) => {
            const piece = pieceTemplate.content.cloneNode(true).children[0];
            piece.style.transform = `translateX(calc(var(--piece-horizontal-stride) * ${x})) translateY(calc(var(--piece-vertical-stride) * ${y}))`;
            piece.querySelector('img').src = `./assets/${identity}.png`;
            river.appendChild(piece);
        });
    </script>

    <div style="perspective: 1200px; position: relative;">
        <div class="three-d" style="transform: rotate3d(1, 0, 0, 2deg) translate(30px, 700px)" id="自家-手牌">
        </div>
    </div>

    <script>
        const 自家手牌 = document.getElementById('自家-手牌');
        const 自家手牌pieces = [
            [0, "2萬"],
            [1, "3萬"],
            [2, "3萬"],
            [3, "4萬"],
            [4, "5萬"],
            [5, "5萬"],
            [6, "5萬"],
            [7, "7萬"],
            [8, "8萬"],
            [9, "8萬"],
            [10, "8萬"],
            [11, "9萬"],
            [12, "1索"],
        ];

        自家手牌pieces.forEach(([x, identity]) => {
            const piece = pieceTemplate.content.cloneNode(true).children[0];
            piece.style.transform = `translateX(calc(var(--piece-horizontal-stride) * ${x}))`;
            piece.querySelector('img').src = `./assets/${identity}.png`;
            自家手牌.appendChild(piece);
        });

    </script>

</body>